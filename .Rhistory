for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(28)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-11263
remDr$close()
remDr$open()
for (i in 1:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-11289
for (i in 1:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
j
limites$pagfis_0[i]<-j
for (i in 1:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$open()
limites$pagfis_0[i]<-j
for (i in 1:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 1:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-j
limites$pagfis_0[2]<-j
limites$pagfis_0[2]<-12048
for (i in 2:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(31)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
remDr$navigate(url)
Sys.sleep(35)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 3:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 4:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 4:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 4:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 4:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 5:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
limites$pagfis_0[i]<-j
for (i in 5:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 5:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
remDr$close()
remDr$open()
limites$pagfis_0[i]<-j
for (i in 6:nrow(limites)) {
for (j in limites$pagfis_0[i]:limites$pagfis_1[i]) {
print(paste0(i,"_",j))
url<-paste0("http://memoria.bn.br/DocReader/DocReader.aspx?bib=873730&pagfis=",j)
Sys.sleep(5)
remDr$navigate(url)
Sys.sleep(30)
imgsrc <- read_html(remDr$getPageSource()[[1]]) %>%
html_node(xpath = '//*[@id="DocumentoImg"]')%>%
html_attr('src')
download.file(paste0("http://memoria.bn.br/DocReader/", imgsrc), destfile = paste0("imagens/",limites$ANO[i],"_",j,".JPG"),mode = 'wb')
}
}
install.packages("daiR")
library(dplyr)
library(daiR)
resp <- dai_sync_tab("pdf/teste.pdf")
resp <- dai_sync_tab("pdf/teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8")
resp <- dai_sync_tab("pdf/teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8")
resp <- dai_sync_tab("teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8")
resp <- dai_sync_tab("teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8",proj_id = "	geolv-268112")
resp <- dai_sync_tab("teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8",proj_id = "geolv-268112")
resp <- dai_sync_tab("pdf/teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8",proj_id = "geolv-268112")
resp <- dai_sync_tab("teste.pdf",token = "AIzaSyCRb_7Vce6HUXuW85maqnkJFVgsP8qPEh8",proj_id = "geolv-268112")
resp <- dai_sync_tab("teste.pdf",token = "837430724519-31vfno2mofibvapp8a2vpoq478ekf64e.apps.googleusercontent.com",proj_id = "geolv-268112")
resp <- dai_sync_tab("teste.pdf")
get_project_id()
usethis::edit_r_environ()
resp <- dai_sync_tab("teste.pdf")
dai_token()
usethis::edit_r_environ()
usethis::edit_r_environ()
library(dplyr)
library(daiR)
get_project_id()
usethis::edit_r_environ()
get_project_id()
resp <- dai_sync_tab("teste.pdf")
get_project_id()
library(dplyr)
library(daiR)
get_project_id()
resp <- dai_sync_tab("teste.pdf")
library(dplyr)
library(daiR)
get_project_id()
library(dplyr)
library(daiR)
get_project_id()
resp <- dai_sync_tab("teste.pdf")
text <- text_from_dai_response(resp)
View(resp)
text <- text_from_dai_response(resp)
tables <- tables_from_dai_response(resp)
View(tables)
tables[[1]]
View(table[[1]])
View(tables[[1]])
rm(resp)
resp <- dai_sync_tab("pdf/1906.pdf")
resp <- dai_sync_tab("C:/Users/gcase/Documents/Projetos_R/macro_aplicada_patentes/pdf/1906.pdf")
resp <- dai_sync_tab("1906.pdf")
tables <- tables_from_dai_response(resp)
resp <- dai_sync_tab("1906.pdf")
rm(resp)
library(googleCloudStorageR)
gcs_upload("1906.pdf")
project_id <- "geolv-268112"
gcs_list_buckets(project_id)
gcs_create_bucket("dair-gabriel-bucket", project_id, location = "EU")
gcs_list_buckets(project_id)
gcs_upload("1906.pdf")
gcs_list_objects()
resp<-dai_async_tab("1906.pdf")
tables <- tables_from_dai_response(resp)
dai_status(resp)
dai_status(resp)
resp<-dai_async_tab("1906.pdf",dest_folder = "pdf/")
gcs_list_objects()
dai_status(resp)
tables <- tables_from_dai_file("1906.pdf-output-page-1-to-41.json")
gcs_list_objects()
tables <- tables_from_dai_file("1906.pdf-output-page-1-to-41.json")
View(tables)
View(tables[[1]])
View(tables[[2]])
View(tables[[3]])
lapply(tables,ncol)
View(tables[[41]])
View(tables[[40]])
View(tables[[39]])
help("tables_from_dai_file")
help("dai_async_tab")
View(tables[[38]])
View(tables[[36]])
t<-lapply(tables,colnames)
View(t)
View(tables[[2]])
colnames_adj<-function(x){setNames(rbind(names(x), x), paste0("X",1:ncol(x)))}
lapply(tables, colnames_adj)
t<-lapply(tables, colnames_adj)
View(t)
colnames_adj<-function(x){
t<-rbind(colnames(x), x)
colnames(t)<-paste0("X",1:ncol(x))
return(t)}
t<-lapply(tables, colnames_adj)
warnings()
colnames(tables[[1]])
t<-tables[[1]]
View(t)
t<-lapply(tables,function(x){apply(x,2,as.character)})
View(t)
View(tables[[1]])
View(t[[2]])
return(t)}
return(t)}
colnames_adj<-function(x){
t<-rbind(colnames(x), x)
colnames(t)<-paste0("X",1:ncol(x))
return(t)
}
t<-lapply(t, colnames_adj)
length(t[[1]])
dim(t[[1]])
dim(t[[2]])
colnames(t)<-paste0("X",1:dim(x)[2])
colnames_adj<-function(x){
t<-rbind(colnames(x), x)
colnames(t)<-paste0("X",1:dim(x)[2])
return(t)
}
t<-lapply(tables,function(x){apply(x,2,as.character)})
t<-lapply(t, colnames_adj)
colnames(t)<-paste0("X",1:dim(t)[2])
colnames_adj<-function(x){
t<-rbind(colnames(x), x)
colnames(t)<-paste0("X",1:dim(t)[2])
return(t)
}
t<-lapply(tables,function(x){apply(x,2,as.character)})
t<-lapply(t, colnames_adj)
View(t)
View(t[[1]])
t<-lapply(t, data.frame,stringsAsFactors=F)
View(t)
t<-t[2:41]
length(t)
t<-do.call(bind_rows,t)
View(t)
saveRDS(t,"teste_1906.rds")
